<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="nodebox.js"></script>
<script type="text/javascript" src="callback.js"></script>
<script type="text/javascript" src="euclidean.js"></script>
<script type="text/javascript">
    exports.applyStateMachine(exports.Euclidean);
    var eu1 = new exports.Euclidean(102,18)
    var euset=
        {
            'entry':0,
            'states': [
                ['compare', 1, 2],
                ['minus', 0, -1],
                ['exchange', 1]
            ]
        }
    eu1.set(euset)

    eu2 = new exports.Euclidean(65,200)
    eu2.set(euset)

    model = new exports.applyStateMachine(new Function);
    var host = new model;
    host.eu1 = eu1
    host.eu2 = eu2

    var eu3 = new model;
    eu3.alert = function()
    {
        alert("Just a rest");
        this.result(1);
        this.go();
    }
    //eu3.set(euset)

    host.set({
            'entry':0,
            'states':[
                ['eu1', 1],
                ["eu3.alert", 2],
                ['eu2', -1]
            ]
            })

    host.start()
    document.write(eu1.t2 + ' ' + eu2.t2 + ' ' + eu3.t2);
</script>
</head>
<body>
</body>
</html>
